@{
    ViewBag.Title = "Campamentos";
}

<div data-ng-app="campamentos" data-ng-controller="campamentosController">
    <div class="row">
        <div class="col-sm-10">
            <h2 class=""><strong>@ViewBag.Title</strong></h2>
        </div>
        <div class="col-sm-2">
            <h2 class="text-primary text-center">
                <span class="glyphicon glyphicon-home"></span>
            </h2>
        </div>
    </div>

    <hr />

    <div class="row">
        <div class="col-sm-10">

            <form>
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div>
                        <input type="text" class="form-control" placeholder="Buscar" data-ng-model="search">
                    </div>
                </div>
            </form>

            <table class="table table-hover">
                <thead>
                    <tr class="bg-primary">
                        <td data-ng-click="sortType = 'name'; sortReverse = !sortReverse">
                            Nombre
                            <span data-ng-show="sortType == 'name' && !sortReverse" class="pull-right glyphicon glyphicon-chevron-down"></span>
                            <span data-ng-show="sortType == 'name' && sortReverse" class="pull-right glyphicon glyphicon-chevron-up"></span>
                        </td>
                        <td data-ng-click="sortType = 'location'; sortReverse = !sortReverse">
                            Provincia
                            <span data-ng-show="sortType == 'location' && !sortReverse" class="pull-right glyphicon glyphicon-chevron-down"></span>
                            <span data-ng-show="sortType == 'location' && sortReverse" class="pull-right glyphicon glyphicon-chevron-up"></span>
                        </td>
                        <td data-ng-click="sortType = 'capacity'; sortReverse = !sortReverse">
                            Capacidad
                            <span data-ng-show="sortType == 'capacity' && !sortReverse" class="pull-right glyphicon glyphicon-chevron-down"></span>
                            <span data-ng-show="sortType == 'capacity' && sortReverse" class="pull-right glyphicon glyphicon-chevron-up"></span>
                        </td>
                        <td data-ng-click="sortType = 'bedrooms'; sortReverse = !sortReverse">
                            Habitaciones
                            <span data-ng-show="sortType == 'bedrooms' && !sortReverse" class="pull-right glyphicon glyphicon-chevron-down"></span>
                            <span data-ng-show="sortType == 'bedrooms' && sortReverse" class="pull-right glyphicon glyphicon-chevron-up"></span>
                        </td>
                    </tr>                    
                </thead>
                <tbody>
                    <tr data-ng-repeat="campamento in Campamentos | orderBy:sortType:sortReverse | filter:search" ng-click="setSelected(campamento.id)" ng-class="{active: campamento.id === CampamentoSeleccionado}">
                        <td>{{campamento.name}}</td>
                        <td>{{campamento.location}}</td>
                        <td>{{campamento.capacity}}</td>
                        <td>{{campamento.bedrooms}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-2">
            <div class="btn-group-vertical">
                <a href="@Url.Action("Create")" class="btn btn-primary">
                    <span class="glyphicon glyphicon-plus"></span>
                    Crear
                </a>
                <hr />
                <a href="" class="btn btn-default">
                    <span class="glyphicon glyphicon-eye-open"></span>
                    Ver
                </a>

                <a href="" class="btn btn-default">
                    <span class="glyphicon glyphicon-pencil"></span>
                    Editar
                </a>
                <a href="" class="btn btn-default">
                    <span class="glyphicon glyphicon-remove"></span>
                    Eliminar
                </a>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        var app = angular.module('campamentos', []).controller('campamentosController', function ($scope, $http) {
            $scope.Campamentos = @Html.Raw(Json.Encode(ViewBag.campamentos));
            $scope.sortType     = 'name';
            $scope.sortReverse  = false;  
            $scope.search   = '';
            $scope.CampamentoSeleccionado = null;
            $scope.setSelected = function (CampamentoSeleccionado) {
                console.log(CampamentoSeleccionado);
                $scope.CampamentoSeleccionado = CampamentoSeleccionado;
            };
        });
    </script>
}

